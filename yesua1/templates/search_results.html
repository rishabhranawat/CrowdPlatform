  <html>
  {% extends "banner_base.html" %}

{% load i18n %}
{% load staticfiles %}

{% block head_title %}{% trans "Create Lesson Plan" %}{% endblock %}

<!-- Don't know the purpose of the following line -->
{% block body_class %}home{% endblock %}

  <head>

    <title>Search Results</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

    <!-- Our own CSS -->
    <link rel="stylesheet" href="{% static "css/style.css" %}" type="text/css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="{% static "js/jquery-1.7.1.js" %}"></script>
    <script type="text/javascript" src="{% static "js/jquery.tablednd.0.7.min.js" %}"></script>
    <script type="text/javascript">
        $(document).ready(function() {
          // Initialise the first table (as before)
          $("#table1").tableDnD({
              dragHandle: ".dragHandle",
              onDragClass: "myDragClass",
                onDrop: function(table, row) {
                      var rows = table.tBodies[0].rows;
                      var debugStr = "Row dropped was "+row.id+". New order: ";
                      for (var i=0; i<rows.length; i++) {
                          debugStr += rows[i].id+" ";
                      }
                    $("#debugArea").html(debugStr);
                },
              onDragStart: function(table, row) {
                $("#debugArea").html("Started dragging row "+row.id);
              }
            });
          $("#table1 tr").hover(function() {
                  $(this.cells[0]).addClass('showDragHandle');
            }, function() {
                  $(this.cells[0]).removeClass('showDragHandle');
            });

          //second table
          // Initialise the first table (as before)
          $("#table2").tableDnD({
              dragHandle: ".dragHandle",
              onDragClass: "myDragClass",
                onDrop: function(table, row) {
                      var rows = table.tBodies[0].rows;
                      var debugStr = "Row dropped was "+row.id+". New order: ";
                      for (var i=0; i<rows.length; i++) {
                          debugStr += rows[i].id+" ";
                      }
                    $("#debugArea").html(debugStr);
                },
              onDragStart: function(table, row) {
                $("#debugArea").html("Started dragging row "+row.id);
              }
            });
          $("#table2 tr").hover(function() {
                  $(this.cells[0]).addClass('showDragHandle');
            }, function() {
                  $(this.cells[0]).removeClass('showDragHandle');
            });

          // Initialise the first table (as before)
          $("#table3").tableDnD({
              dragHandle: ".dragHandle",
              onDragClass: "myDragClass",
                onDrop: function(table, row) {
                      var rows = table.tBodies[0].rows;
                      var debugStr = "Row dropped was "+row.id+". New order: ";
                      for (var i=0; i<rows.length; i++) {
                          debugStr += rows[i].id+" ";
                      }
                    $("#debugArea").html(debugStr);
                },
              onDragStart: function(table, row) {
                $("#debugArea").html("Started dragging row "+row.id);
              }
            });
          $("#table3 tr").hover(function() {
                  $(this.cells[0]).addClass('showDragHandle');
            }, function() {
                  $(this.cells[0]).removeClass('showDragHandle');
            });
        });
    </script>
    <!-- Table drag and drop -->
    
  </head>

  <body>

    {% block banner %}

      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">

    <!-- Our own CSS -->
    <link rel="stylesheet" href="{% static "css/style.css" %}" type="text/css">

    <div class="container">
      <div id="debugArea" style="float: right">&nbsp;</div>
      
      <!-- First Div -->
      <table class="table table-hover" id="table1">

        <thead>
          <tr>
            <th>Engage</th>
          </tr>
        </thead>

        <tbody>
          {% for enlink in en %}
          <!--- search result -->
          <tr id="engage_{{forloop.counter}}">
            <td class="dragHandle"></td>
            <td>
              <div class="col-md-11">
                  <h4><a href="">{{ enlink.url }}</a></h4>
                  <p>{{ enlink.desc }}</p>
                  <div id="annotate_engage_{{forloop.counter}}"></div>
              </div>
              <div class="col-md-1">
                <input type="image" class="img-responsive" src="{% static "images/keep.png" %}" onclick="addAnnotation('annotate_engage_','{{forloop.counter}}'); this.style.display = 'none';" width="20" height="20"/>
                <input type="image" class="img-responsive" src="{% static "images/delete.png" %}" onclick="removeElement('engage_{{forloop.counter}}');" width="20" height="20" />
              </div>
            </td>
          </tr> 
          <!-- search result ends -->
          {% endfor %}

          

        </tbody>

      </table>

      <!-- second div -->
      <table class="table table-hover" id="table2">

        <thead>
          <tr>
            <th>Explain</th>
          </tr>
        </thead>

        <tbody>
          <!--- search result -->
          {% for enlink in ex %}
          <!--- search result -->
          <tr id="explain_{{forloop.counter}}">
            <td class="dragHandle"></td>
            <td>
              <div class="col-md-11">
                  <h4><a href="">{{ enlink.url }}</a></h4>
                  <p>{{ enlink.desc }}</p>
                  <div id="annotate_explain_{{forloop.counter}}"></div>
              </div>
              <div class="col-md-1">
                <input type="image" class="img-responsive" src="{% static "images/keep.png" %}" onclick="addAnnotation('annotate_explain_','{{forloop.counter}}'); this.style.display = 'none';" width="20" height="20"/>
                <input type="image" class="img-responsive" src="{% static "images/delete.png" %}" onclick="removeElement('explain_{{forloop.counter}}');" width="20" height="20" />
              </div>
            </td>
          </tr> 
          <!-- search result ends -->
          {% endfor %}

          
        </tbody>
      </table>

      <!-- third div -->
      <table class="table table-hover" id="table3">

        <thead>
          <tr>
            <th>Evaluate</th>
          </tr>
        </thead>

        <tbody>
          <!--- search result -->
          {% for enlink in ev %}
          <!--- search result -->
          <tr id="evaluate_{{forloop.counter}}">
            <td class="dragHandle"></td>
            <td>
              <div class="col-md-11">
                  <h4><a href="">{{ enlink.url }}</a></h4>
                  <p>{{ enlink.desc }}</p>
                  <div id="annotate_evaluate_{{forloop.counter}}"></div>
              </div>
              <div class="col-md-1">
                <input type="image" class="img-responsive" src="{% static "images/keep.png" %}" onclick="addAnnotation('annotate_evaluate_','{{forloop.counter}}'); this.style.display = 'none';" width="20" height="20"/>
                <input type="image" class="img-responsive" src="{% static "images/delete.png" %}" onclick="removeElement('evaluate_{{forloop.counter}}');" width="20" height="20" />
              </div>
            </td>
          </tr> 
          <!-- search result ends -->
          {% endfor %}

                    
          <!-- search result ends -->


        </tbody>
      </table>

      <script>

      function removeElement(ele){
        document.getElementById(ele).style.display = "none";
        document.getElementById('submit').innerHTML = "Save";
        document.getElementById('submit').className = "btn btn-primary";
      }

      function addAnnotation(divtype,id)
  {
    var resultDiv = document.getElementById(divtype+id);
    var label = document.createElement("label");
    var savetextBtn = document.createElement("input");
    savetextBtn.setAttribute("type", "button");
    savetextBtn.setAttribute("value", "Save Note");
    savetextBtn.setAttribute("name","Annotation" + id);
    savetextBtn.setAttribute("data-id", id);
    savetextBtn.className = "btn btn-default";
    savetextBtn.addEventListener('click', function(event) {
        event.preventDefault();

        var id = this.getAttribute('data-id');
            this.className = "btn btn-success";
        saveAnnotation(id);

            document.getElementById('submit').innerHTML = "Save";
            document.getElementById('submit').className = "btn btn-primary";
      });




    label.innerHTML="Add Description";
    var textarea = document.createElement("textarea");
    textarea.setAttribute("id", "Annotation" + id);
    textarea.setAttribute("rows", "5");
    textarea.setAttribute("cols", "60");
    textarea.setAttribute("placeholder", "Please add your comments here");
    resultDiv.appendChild(document.createElement("br"));
    resultDiv.appendChild(label);
    resultDiv.appendChild(document.createElement("br"));
    resultDiv.appendChild(textarea);
    resultDiv.appendChild(document.createElement("br"));
    resultDiv.appendChild(savetextBtn);
  }


  function saveAnnotation(id)
  {
    //alert(id);
    var textarea = document.getElementById("Annotation" + id);
    var teachersNote = textarea.value;
    textarea.setAttribute("placeholder", teachersNote);
    textarea.setAttribute("disabled", true);
    //alert("hey wassup");
  }

  function displayresult()
  {
    var textarea = document.getElementById("Annotation0_0");
    var test1 = document.getElementById("Annotation0_0").value;
    alert(test1);
    textarea.setAttribute("placeholder", test1);
    }

    function createflow()
    {
    var inputs = document.getElementsByTagName('input');

    for(var i = 0; i < inputs.length; i++) {
          inputs[i].style.display = 'none';
        
        }
  }
      
      </script>

    </div>


    {% endblock %}
    
  </body>
</html>

